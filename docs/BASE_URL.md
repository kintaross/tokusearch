# ベースURL（NEXT_PUBLIC_BASE_URL）について

## ベースURLとは？

ベースURLは、**サイト全体のルートURL**を指します。これは共有用URL（シェア用URL）ではなく、サイトのドメイン全体を表すURLです。

### 例

- **開発環境:** `http://localhost:3000`
- **本番環境（Vercel）:** `https://your-app.vercel.app`
- **本番環境（独自ドメイン）:** `https://yourdomain.com`

## いつ必要？

### ✅ 本番環境で公開する場合のみ必要

本番環境でサイトを公開する際に、以下の用途で使用されます：

1. **OGP（Open Graph Protocol）メタタグ**
   - SNSでシェアした際のプレビュー画像や説明文のURL生成
   - 例: `<meta property="og:url" content="https://yourdomain.com/deals/123" />`

2. **SNSシェア用URLの生成**
   - Twitter、Facebook、LINEなどでシェアする際の完全なURL
   - 例: `https://yourdomain.com/deals/123`

3. **サイトマップやRSSフィード**
   - 検索エンジン向けのサイトマップ生成
   - RSSフィードのURL生成

### ❌ 開発環境では不要

開発環境（`localhost:3000`）では設定する必要はありません。設定しなくても動作します。

## 現在の状況

**重要:** 現在のコードでは、`NEXT_PUBLIC_BASE_URL` は実際には使用されていません。

これは将来の拡張（OGP対応、SNSシェア機能の強化など）のために用意されている環境変数です。

## 設定方法

### 方法1: セットアップスクリプトで設定

```bash
node scripts/setup-env.js
```

「ベースURL（本番環境用）」の質問で、本番環境のURLを入力します。

### 方法2: 手動で設定

`.env.local` ファイルに追加：

```env
# 本番環境用のベースURL
NEXT_PUBLIC_BASE_URL=https://yourdomain.com
```

**注意:** `NEXT_PUBLIC_` プレフィックスが付いているため、クライアント側でも使用可能です。

## 確認方法

### 開発環境の場合

設定不要です。`http://localhost:3000` が自動的に使用されます。

### 本番環境の場合

1. **Vercelにデプロイする場合**
   - Vercelのダッシュボードで環境変数を設定
   - または、自動的に `https://your-app.vercel.app` が使用される

2. **独自ドメインを使用する場合**
   - 設定したドメインを指定
   - 例: `https://tokusearch.com`

3. **その他のホスティングサービス**
   - 各サービスの環境変数設定で `NEXT_PUBLIC_BASE_URL` を設定

## よくある質問

### Q: 設定しなくても大丈夫？

**A:** はい、大丈夫です。開発環境では不要で、本番環境でも現在のコードでは使用されていません。ただし、将来的にOGPやSNSシェア機能を強化する際には必要になります。

### Q: 共有用URLとベースURLは違うの？

**A:** はい、違います。

- **ベースURL:** サイト全体のルートURL（例: `https://yourdomain.com`）
- **共有用URL:** 個別のページのURL（例: `https://yourdomain.com/deals/123`）

ベースURLは、共有用URLを生成する際のベースとして使用されます。

### Q: 開発中に設定する必要はある？

**A:** いいえ、ありません。開発環境では `localhost:3000` が自動的に使用されるため、設定する必要はありません。

## まとめ

- ✅ **開発環境:** 設定不要（`localhost:3000` が自動使用）
- ✅ **本番環境:** 設定推奨（ただし現在のコードでは未使用）
- ✅ **設定しなくても動作する:** 現在の機能には影響なし

本番環境にデプロイする際に設定すれば十分です。

